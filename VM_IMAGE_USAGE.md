# üñ•Ô∏è Troubleshoot VM - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑

## üì¶ –û–ø–∏—Å–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞

–≠—Ç–æ—Ç –æ–±—Ä–∞–∑ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é Ubuntu 22.04 —Å–∏—Å—Ç–µ–º—É —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ troubleshooting.

**–ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:**
- ‚úÖ Ubuntu Server 22.04 LTS
- ‚úÖ Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –±–∞–≥–∞–º–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (echo, watcher, locker)
- ‚úÖ LVM –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å –¥–∏—Å–∫–∞–º–∏
- ‚úÖ –ù–∞–º–µ—Ä–µ–Ω–Ω–æ –≤–Ω–µ—Å–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

## üñ•Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **RAM:** –º–∏–Ω–∏–º—É–º 2GB, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4GB
- **–î–∏—Å–∫:** 25GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **CPU:** –ª—é–±–æ–π x86_64 –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
- **–°–µ—Ç—å:** –¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞

### UTM (macOS)

```bash
1. –°–∫–∞—á–∞–π—Ç–µ troubleshoot-vm.utm
2. –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ UTM
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Port Forwarding:
   - Host 2222 ‚Üí Guest 22 (SSH)
   - Host 8080 ‚Üí Guest 8080 (HTTP)
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ VM
```

### VirtualBox (–ª—é–±–∞—è –û–°)

```bash
1. –°–∫–∞—á–∞–π—Ç–µ troubleshoot-vm-universal.qcow2
2. VirtualBox ‚Üí New ‚Üí Expert Mode
3. Name: troubleshoot-vm
4. Type: Linux, Version: Ubuntu (64-bit)
5. Memory: 2048MB
6. Hard disk: Use existing ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ .qcow2 —Ñ–∞–π–ª
7. Settings ‚Üí Network ‚Üí Port Forwarding:
   - Host 2222 ‚Üí Guest 22
   - Host 8080 ‚Üí Guest 8080
```

### QEMU/KVM (Linux)

```bash
# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
qemu-system-x86_64 \\
    -hda troubleshoot-vm-universal.qcow2 \\
    -m 2G \\
    -netdev user,id=net0,hostfwd=tcp::2222-:22,hostfwd=tcp::8080-:8080 \\
    -device e1000,netdev=net0

# –ò–ª–∏ –∏–º–ø–æ—Ä—Ç –≤ virt-manager
virt-manager ‚Üí New VM ‚Üí Import existing disk image
```

### VMware (Windows/macOS/Linux)

```bash
1. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ QCOW2 –≤ VMDK:
   qemu-img convert -f qcow2 -O vmdk troubleshoot-vm-universal.qcow2 troubleshoot-vm.vmdk

2. VMware ‚Üí Create New VM ‚Üí Custom
3. Guest OS: Linux ‚Üí Ubuntu 64-bit
4. Use existing disk ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ .vmdk —Ñ–∞–π–ª
5. Network: NAT —Å port forwarding
```

## üîë –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ

**–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** ubuntu
- **–ü–∞—Ä–æ–ª—å:** ubuntu
- **Root –¥–æ—Å—Ç—É–ø:** sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```bash
# SSH (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω port forwarding)
ssh -p 2222 ubuntu@localhost

# –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
open http://localhost:8080
```

## üéØ –ß—Ç–æ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å

### 1. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏
```bash
sudo systemctl status echo.service
sudo systemctl status watcher.service
sudo systemctl status locker.service
```

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–∏—Å–∫–∞–º–∏
```bash
df -h
lsblk
sudo lvdisplay
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
```bash
netstat -tulpn
ss -tulpn
sudo iptables -L
```

### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
```bash
ps aux | grep trouble
top
htop
```

### 5. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
```bash
journalctl -xe
tail -f /var/log/syslog
dmesg
```

## üîÑ –°–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã

–î–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é:

1. **–° —Å–Ω–∞–ø—à–æ—Ç–æ–º:** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–Ω–∞–ø—à–æ—Ç –≤ –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä–µ
2. **–ë–µ–∑ —Å–Ω–∞–ø—à–æ—Ç–∞:** –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –æ–±—Ä–∞–∑
3. **–ß–∞—Å—Ç–∏—á–Ω—ã–π —Å–±—Ä–æ—Å:** –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/novikov-denis/troubleshoot-vm)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ troubleshooting](./README.md)
- [–°–ø–∏—Å–æ–∫ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º](./KNOWN_ISSUES.md)

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–î–µ–ª–∞–π—Ç–µ —Å–Ω–∞–ø—à–æ—Ç—ã** –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø—Ä–∞–∫—Ç–∏–∫–∏
2. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
3. **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. **–ù–µ –±–æ–π—Ç–µ—Å—å —Å–ª–æ–º–∞—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∞!

---
*–í–µ—Ä—Å–∏—è –æ–±—Ä–∞–∑–∞: 1.0*  
*–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: $(date +%Y-%m-%d)*  
*–ê–≤—Ç–æ—Ä: Denis Novikov*
